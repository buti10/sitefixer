import{d as c,i as g,j as m,o as f,k as x,c as r,a as t,l as b,v as _,F as v,r as w,t as i,n as h,g as a,f as y,w as C,e as k,R as L,h as d}from"./index-CEe5TGL3.js";const S={class:"space-y-4"},V={class:"flex items-center justify-between"},j={class:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"},B={class:"flex items-center justify-between gap-2"},I={class:"font-medium truncate"},D={class:"mt-1 text-xs opacity-80 truncate",title:"Herkunft"},N={class:"mt-1 text-xs opacity-60 flex items-center gap-3"},T={class:"inline-flex items-center gap-1"},F={class:"inline-flex items-center gap-1"},M={class:"inline-flex items-center gap-1"},P={class:"mt-3 flex gap-2 justify-end"},q=c({__name:"ChatInbox",setup(R){const o=g(),l=m("");f(()=>o.startInboxPolling(5e3)),onBeforeUnmount(()=>o.stopInboxPolling());const u=x(()=>{const n=l.value.trim().toLowerCase(),s=o.inbox;return n?s.filter(e=>(e.visitor??"").toLowerCase().includes(n)||(e.page??"").toLowerCase().includes(n)||String(e.id).includes(n)):s});function p(n){return n==="waiting"?"bg-amber-100 text-amber-800":n==="active"?"bg-emerald-100 text-emerald-800":n==="open"?"bg-sky-100 text-sky-800":"bg-slate-100 text-slate-700"}return(n,s)=>(d(),r("div",S,[t("div",V,[s[1]||(s[1]=t("h1",{class:"text-lg font-semibold"},"Chat Inbox",-1)),b(t("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>l.value=e),class:"w-60 max-w-[70vw] px-3 py-2 rounded border bg-transparent",placeholder:"Suchenâ€¦"},null,512),[[_,l.value]])]),t("div",j,[(d(!0),r(v,null,w(u.value,e=>(d(),r("div",{key:e.id,class:"rounded-2xl border bg-white dark:bg-[#0f1424] p-3 shadow-sm"},[t("div",B,[t("div",I,i(e.visitor||"Visitor"),1),t("span",{class:h(["px-2 py-0.5 text-[11px] rounded-full",p(e.status)])},i(e.status),3)]),t("div",D,i(e.page||"â€”"),1),t("div",N,[t("span",T,[s[2]||(s[2]=t("span",null,"ðŸ•’",-1)),a(i(e.waiting_since?new Date(e.waiting_since).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"â€”"),1)]),t("span",F,[s[3]||(s[3]=t("span",null,"ðŸ‘¤",-1)),a(i(e.assignee||"frei"),1)]),t("span",M,[s[4]||(s[4]=t("span",null,"ðŸ’¬",-1)),a(i(e.message_count??0),1)])]),t("div",P,[y(k(L),{to:`/chat/${e.id}`,class:"px-2.5 py-1.5 rounded-lg bg-blue-600 text-white hover:bg-blue-700"},{default:C(()=>[...s[5]||(s[5]=[a("Ã–ffnen",-1)])]),_:2},1032,["to"])])]))),128))])]))}});export{q as default};

import{d as j,j as y,y as D,k as K,o as T,c as n,a as t,f as d,l as k,v as w,z as C,w as f,b as S,F as m,r as b,t as i,A as V,h as r}from"./index-CEe5TGL3.js";const F={class:"space-y-4"},L={class:"flex items-center justify-between"},M={class:"flex gap-2 text-sm"},N={class:"grid sm:grid-cols-2 lg:grid-cols-5 gap-3"},U={class:"grid lg:grid-cols-2 gap-4"},$={class:"w-full text-sm"},z={class:"p-2 truncate max-w-[0]"},B=["href"],R={class:"p-2"},W={class:"p-2"},O={key:0},P={class:"w-full text-sm"},q={class:"p-2"},E={class:"p-2"},H={class:"p-2"},G={class:"p-2"},I={key:0},J={class:"grid grid-cols-12 gap-1 text-center text-xs"},Q=["title"],X={components:{Kpi:{props:{label:String,value:[String,Number]},template:'<div class="border rounded-xl p-4"><div class="text-xs opacity-60">{{label}}</div><div class="text-2xl">{{value}}</div></div>'},Card:{props:{title:String},template:'<div class="rounded-xl border overflow-hidden"><div class="p-3 font-medium border-b">{{title}}</div><div class="p-3"><slot/></div></div>'}}},tt=j({...X,__name:"StatsChat",setup(Y){const p=y(""),_=y(""),l=D({waiting:0,open:0,closed:0,avg_wait_sec:0,avg_handle_sec:0,top_pages:[],agents:[],by_hour:Array(24).fill(0)}),A=K(()=>Math.max(1,...l.by_hour));function u(o){return typeof o=="number"?o.toLocaleString():"—"}function v(o){if(!o)return"—";const e=Math.floor(o/60),c=o%60;return`${e}m ${c}s`}async function x(){const o=new URLSearchParams;p.value&&o.set("from",p.value),_.value&&o.set("to",_.value);const e=await fetch(`/mock/stats/chat.json?${o.toString()}`);Object.assign(l,await e.json())}return T(x),(o,e)=>{const c=C("Kpi"),g=C("Card");return r(),n("div",F,[t("div",L,[e[2]||(e[2]=t("h1",{class:"text-xl font-semibold"},"Chat Stats",-1)),t("div",M,[k(t("input",{type:"date","onUpdate:modelValue":e[0]||(e[0]=a=>p.value=a),class:"border rounded px-2 py-1"},null,512),[[w,p.value]]),k(t("input",{type:"date","onUpdate:modelValue":e[1]||(e[1]=a=>_.value=a),class:"border rounded px-2 py-1"},null,512),[[w,_.value]]),t("button",{class:"px-3 py-1.5 border rounded",onClick:x},"Aktualisieren")])]),t("div",N,[d(c,{label:"Wartend",value:u(l.waiting)},null,8,["value"]),d(c,{label:"Offen",value:u(l.open)},null,8,["value"]),d(c,{label:"Abgeschlossen",value:u(l.closed)},null,8,["value"]),d(c,{label:"Avg. Wartezeit",value:v(l.avg_wait_sec)},null,8,["value"]),d(c,{label:"Avg. Dauer",value:v(l.avg_handle_sec)},null,8,["value"])]),t("div",U,[d(g,{title:"Top-Seiten (Chats)"},{default:f(()=>{var a;return[t("table",$,[e[4]||(e[4]=t("thead",{class:"bg-black/5 dark:bg-white/5"},[t("tr",null,[t("th",{class:"p-2 text-left"},"URL"),t("th",{class:"p-2 text-left"},"Chats"),t("th",{class:"p-2 text-left"},"Avg. Wait")])],-1)),t("tbody",null,[(r(!0),n(m,null,b(l.top_pages,(s,h)=>(r(),n("tr",{key:h,class:"border-t"},[t("td",z,[t("a",{href:s.url,target:"_blank",class:"text-blue-600 underline"},i(s.url),9,B)]),t("td",R,i(u(s.chats)),1),t("td",W,i(v(s.avg_wait_sec)),1)]))),128)),(a=l.top_pages)!=null&&a.length?S("",!0):(r(),n("tr",O,[...e[3]||(e[3]=[t("td",{class:"p-4 text-center opacity-60",colspan:"3"},"Keine Daten",-1)])]))])])]}),_:1}),d(g,{title:"Agenten-Performance"},{default:f(()=>{var a;return[t("table",P,[e[6]||(e[6]=t("thead",{class:"bg-black/5 dark:bg-white/5"},[t("tr",null,[t("th",{class:"p-2 text-left"},"Agent"),t("th",{class:"p-2 text-left"},"Chats"),t("th",{class:"p-2 text-left"},"Avg. FRT"),t("th",{class:"p-2 text-left"},"CSAT")])],-1)),t("tbody",null,[(r(!0),n(m,null,b(l.agents,(s,h)=>(r(),n("tr",{key:h,class:"border-t"},[t("td",q,i(s.name),1),t("td",E,i(u(s.chats)),1),t("td",H,i(v(s.avg_frt_sec)),1),t("td",G,i(s.csat!=null?s.csat.toFixed(2):"—"),1)]))),128)),(a=l.agents)!=null&&a.length?S("",!0):(r(),n("tr",I,[...e[5]||(e[5]=[t("td",{class:"p-4 text-center opacity-60",colspan:"4"},"Keine Daten",-1)])]))])])]}),_:1})]),d(g,{title:"Aktivität nach Stunde"},{default:f(()=>[t("div",J,[(r(!0),n(m,null,b(l.by_hour,(a,s)=>(r(),n("div",{key:s,class:"h-8 rounded",title:s+":00 → "+a,style:V({background:`rgba(34,197,94,${a/A.value||0})`})},i(s),13,Q))),128))])]),_:1})])}}});export{tt as default};
